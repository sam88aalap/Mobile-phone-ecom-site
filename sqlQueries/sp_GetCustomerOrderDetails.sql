/****@Version:1.0**@Date:07/04/2022**@Dev:68186**//**If the sp exist then we delete it **/IF EXISTS(	SELECT 1 FROM sys.objects WHERE type='P' AND OBJECT_ID=OBJECT_ID('[dbo].[sp_GetCustomerOrderDetails]'))BEGIN	DROP PROCEDURE [dbo].[sp_GetCustomerOrderDetails]ENDGOCREATE PROCEDURE [dbo].[sp_GetCustomerOrderDetails]	@customerId INTASBEGIN	IF NOT EXISTS(		SELECT 1 FROM [dbo].[customer] AS c WITH(NOLOCK)			WHERE c.customerid=@customerId     )	 BEGIN		--RAISSERROR		THROW 600001,'No such customer exists',18;	 END	SELECT 		o.orderid,o.orderdate,		c.customerid,c.customername,		p.productname,p.price,		oi.qty,(p.price*oi.qty) Amount	FROM dbo.orderd AS o WITH(NOLOCK)		INNER JOIN dbo.orderitem AS oi WITH(NOLOCK)			ON o.orderid=oi.orderid		INNER JOIN dbo.product AS p WITH(NOLOCK)			ON p.pid=oi.pid 		INNER JOIN dbo.customer AS c WITH(NOLOCK)			ON c.customerid=o.customerid		WHERE o.customerid=@customerId;ENDGO